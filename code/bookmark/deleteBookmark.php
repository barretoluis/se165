<?php/* * Add additional include files to array if needed for this page. */$includeFilesAdditional = array(	'Bookmark/Bookmark.class.php');// DO NOT EDIT THIS BLOCK - START/* * Require mandatory libraries to be loaded. * Else, redirect to server outage page. * */try {	// require the primary include file	if (!include_once('main.php')) {		throw new Exception("Unable to include the main library.\n");	}} catch (Exception $e) {	throw new Exception('Was not able to include the main.php file.', 0, $e);	header('HTTP/1.1 500 Internal Server Error', true, 500);	exit(0);}// DO NOT EDIT THIS BLOCK - END/* * Page specific PHP code here */$_websiteErr = Array();$_followingTracks = Array();$bookmarkId = (isset($_GET['bid'])) ? (int) $_GET['bid'] : NULL;$bmkId = (isset($_POST['bid'])) ? (int) $_POST['bid'] : NULL;	// ///////////	// Retrieve track info and populate form	//Get the track and display it's info        if ($bmkId != NULL) {	try {		$Bookmark = new Bookmark();                $success = $Bookmark->removeBookmark($bmkId);                if($success == TRUE)                {                 include 'html/formSuccess.php';                 //echo "<script>parent.jQuery.fn.colorbox.close();</script>";                  exit;                }			} catch (MyException $e) {		$e->getMyExceptionMessage();	}                }                    //Get user's tracks if not available in session alreadyif (!isset($_SESSION['_myTracks']) || !isset($_SESSION['_followingTracks'])) {	try {		$myTracks = new track();		$_myTracks = $myTracks->getMyTrack($_SESSION['uc_id'], 'id,title');		$_followingTracks = $myTracks->returnFollowingTracks($_SESSION['uc_id'], 'id,title,private');		$_SESSION['_myTracks'] = $_myTracks;		$_SESSION['_followingTracks'] = $_followingTracks;	} catch (MyException $e) {		$e->getMyExceptionMessage();	}}//Let's populate the search bar with the user's tracksif (isset($_SESSION['_myTracks'])) {	$trackString = '<select name="tid" id="tid">';	$trackString .= '<option value="-1" class="">Select Track</option>';	foreach ($_SESSION['_myTracks'] as $_record) {		$id = $_record['id'];		$title = $_record['title'];		$private = (isset($_record['private']) && $_record['private'] == 1) ? 'private' : '';		$trackString .= '<option value="' . $id . '" class="' . $private . '">' . $title . '</option>';	}	$trackString .= '</select>';}?><!DOCTYPE html><html>	<head>		<title>Tackster | Bookmark</title>		<meta name="viewport" content="width=device-width, initial-scale=1.0">		<meta name="description" content="">		<meta name="author" content="">		<!-- Bootstrap -->		<link href="/framework/bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">		<link href="/framework/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">		<!-- Style Sheets -->		<link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:700,300,300italic' rel='stylesheet' type='text/css'>                <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.2/css/font-awesome.min.css" rel="stylesheet"> <!--for delete and edit icons-->		<link href="/shared/css/base.css" rel="stylesheet" type="text/css">		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->		<!--[if lt IE 9]>		<script src="/framework/bootstrap/assets/js/html5shiv.js"></script>		<script src="/framework/bootstrap/assets/js/respond.min.js"></script>		<![endif]-->		<!-- JavaScript -->		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->		<script src="/framework/jquery/jquery-1.10.2.min.js"></script>		<!-- Include all compiled plugins (below), or include individual files as needed -->		<script src="/framework/bootstrap/js/bootstrap.min.js"></script>                <script src="/framework/jquery/jquery.colorbox.js"></script>		                	</head>	<body>		<script>     //			//			function closeModal() {//				parent.jQuery.fn.colorbox.close();//			}////			setTimeout(closeModal, 2000);		</script>		<!-- Body Content-->		<div class="bookmark">		<h3> Delete Bookmark</h3>                <div class="container">		<div class="well">		<?php		if (count($_websiteErr) > 0 || $_websiteErr != NULL) {		echo $_websiteErr;		}                ?>                    <form class="form-horizontal" id="createBookmark" name="deleteBookmark" method="post" action="deleteBookmark.php">                                   <input id="bid" type="hidden" name="bid" value="<?php echo_formData($bookmarkId); ?>">                                                <label>Are you sure you want to remove this bookmark from Tackster?</label></td>																<button class="btn btn-danger" type="submit" id="submit_id">Remove</button>                        					</form>                    <button style="position: relative; top: -27px;"class="btn btn-success" onclick="location.href='/bookmark/?bid=<?php echo $bookmarkId; ?>'">Cancel</button>                                     				</div>			</div>		</div><script src="http://code.jquery.com/jquery-1.9.1.js"></script>                <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>                <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />                                <script>                //Script to handle autocomplete for keywords with CSVs                $(document).ready(function($){                           $('#keywords').autocomplete({source:function (request, response) {                            $.getJSON("../search/autocomplete.php", {                                term: extractLast(request.term)                            }, response);                            },                            //Jquery events to handle                             search: function () {                                var term = extractLast(this.value);                                // Set length you want autocomplete to start searching at                                if (term.length < 1) {                                    return false;                                }                            },                            focus: function () {                                // prevent value inserted on focus                                return false;                            },                                                                appendTo: $("#keywords").next(),                                                        select: function (event, ui) {                                var terms = split(this.value);                                // remove the current input                                terms.pop();                                // add the selected item                                terms.push(ui.item.value);                                // add placeholder to get the comma-and-space at the end                                terms.push("");                                this.value = terms.join(", ");                                return false;                            }, minLength:1});                                  });                        function split(val) {                            return val.split(/,\s*/);                        }                        function extractLast(term) {                            return split(term).pop();                        }                </script>		<!-- /Body Content-->	</body></html>