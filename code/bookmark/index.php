<?php/* * Add additional include files to array if needed for this page. */$includeFilesAdditional = array(	'Bookmark/Bookmark.class.php');// DO NOT EDIT THIS BLOCK - START/* * Require mandatory libraries to be loaded. * Else, redirect to server outage page. * */try {	// require the primary include file	if (!include_once('main.php')) {		throw new Exception("Unable to include the main library.\n");	}} catch (Exception $e) {	throw new Exception('Was not able to include the main.php file.', 0, $e);	header('HTTP/1.1 500 Internal Server Error', true, 500);	exit(0);}// DO NOT EDIT THIS BLOCK - END/* * Page specific PHP code here *///variables for getting bookmark$bmkHtml = NULL;$_bmkData = Array();//variables for getting bookmark comments$htmlComments = NULL;$_comments = NULL;/* * Code to check permissions if user can view the bookmark requested */$bmkId = (isset($_GET['bid'])) ? (int) $_GET['bid'] : NULL;$Bookmark = new Bookmark();$_websiteErr = Array();$ucId = $_SESSION['uc_id'];try {	$canViewBmk = $Bookmark->canViewBmk($ucId, $bmkId);} catch (MyException $e) {	$canViewBmk = FALSE;	array_push($_websiteErr, $e->getMessage());	$e->getMyExceptionMessage();}if ($canViewBmk) {	/*	 * Code to view bookmark	 */	if (isset($_GET['bid'])) {		try {			$_bmkData = $Bookmark->returnBookmark($bmkId);		} catch (MyException $e) {			$e->getMyExceptionMessage();			array_push($_websiteErr, $e->getMessage());		}//		$bmkUcId = $_bmkData[0]['uc_id'];//		$bmkTid = $_bmkData[0]['t_id'];		$bmkUrl = $_bmkData[0]['url'];//		$bmkPriv = $_bmkData[0]['privacy'];		$bmkDesc = $_bmkData[0]['description'];		$bmkImg = $_bmkData[0]['bmk_image'];//		$bmkKey = $_bmkData[0]['keyword'];		$bmkHtml = <<<EOF<div id="image"><img src="/shared/images/bmk/{$bmkImg}"></div>\n<div id="description">{$bmkDesc}</div>\n<div id="username">[USERNAME]</div>\n<div id="url"><a href="{$bmkUrl}">view bookmark</a></div>\nEOF;	}	/*	 * Bookmark comments code	 */	try {		$_comments = $Bookmark->returnBmkComments($bmkId);	} catch (MyException $e) {		array_push($_websiteErr, $e->getMessage());		$e->getMyExceptionMessage();	}	if (count($_comments) > 0) {		foreach ($_comments as $_dbRecord) {			foreach ($_dbRecord as $key => $value) {				switch ($key) {					case 'id':						$htmlComments .= '<div id="' . $value . '">\n';						break;					case 'username':						if ($value == NULL) {							$value = "Not Available";						}						$htmlComments .= '<div id="username">' . $value . '</div>\n';						break;					case 'photo':						if ($value == NULL) {							$value = "/shared/images/profileBlank.png";						} else {							$value = "/shared/images/{$value}";						}						$htmlComments .= '<div id "photo"><img src="' . $value . '"></div>\n';						break;					case 'comment':						$htmlComments .= '<div id="comment">' . $value . '</div>\n';						break;					default:						break;				}			}			$htmlComments .= '</div>\n';		}	}} else {	array_push($_websiteErr, "Either this bookmark does not exist or you do not have permissions to view it.");}/* * Format any page errors to show user on webpage. */if (count($_websiteErr) >= 1) {	$errString = '<div class="formError"><p><b>We encountered the following issue with your request:</b></p><ol>';	foreach ($_websiteErr as $value) {		$errString .= "<li>" . $value . "</li>\n";	}	$errString .= '</ol></div>';	$_websiteErr = $errString;}?><!DOCTYPE html><html>	<head>		<title>Tackster | Bookmark</title>		<meta name="viewport" content="width=device-width, initial-scale=1.0">		<meta name="description" content="">		<meta name="author" content="">		<!-- Bootstrap -->		<link href="/framework/bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">		<link href="/framework/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">		<!-- Style Sheets -->		<link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:700,300,300italic' rel='stylesheet' type='text/css'>		<link href="/shared/css/base.css" rel="stylesheet" type="text/css">		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->		<!--[if lt IE 9]>		<script src="/framework/bootstrap/assets/js/html5shiv.js"></script>		<script src="/framework/bootstrap/assets/js/respond.min.js"></script>		<![endif]-->		<!-- JavaScript -->		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->		<script src="/framework/jquery/jquery-1.10.2.min.js"></script>		<!-- Include all compiled plugins (below), or include individual files as needed -->		<script src="/framework/bootstrap/js/bootstrap.min.js"></script>	</head>	<body>		<!-- Body Content-->		<div class="bookmark">			<h3>View Bookmark</h3>			<div class="container">				<div class="well">					<?php					if (count($_websiteErr) > 0 || $_websiteErr != NULL) {						echo $_websiteErr;					}					//print_r($_bmkData);					echo_formData($bmkHtml);					echo_formData($htmlComments);					?>				</div>			</div>		</div>		<!-- /Body Content-->	</body></html>